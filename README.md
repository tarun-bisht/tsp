# Travelling Salesman Problem using Integer Programming

This repository contains code to find solution of travelling salesman problem (TSP) using integer programming for any list of cities. TSP problem is, given a list of cities and the distances between each pair of cities, what is the shortest possible route that visits each city exactly once and returns to the origin city?

## Features
- Provide method to get city details, latitude and longitude information from [openstreetmap API](https://nominatim.openstreetmap.org) using which distance between these cities is calculated using Haversine formula.
- Provide a formulation of TSP using [pyomo](http://www.pyomo.org/) that can be solved by any MILP solver supported by pyomo.

## Installation
### Install Python
There are two ways to install python in windows using [Python 3 installer](https://www.python.org/downloads/) or [Anaconda](https://docs.conda.io/projects/conda/en/latest/user-guide/install/index.html). Installing python with anaconda or [miniconda](https://docs.conda.io/en/latest/miniconda.html) is recommended. In linux Python 3 is installed by default but we can also install miniconda or conda into linux.

### Creating Virtual Environment
Create a new python virtual environment using conda or venv and activate it. If Anaconda or Miniconda is installed use `conda` else use `venv` to create virtual environments.

- Using conda
```bash
conda create --name artist
conda activate artist
conda install pip
```

- Using venv in linux
```bash
python3 -m venv path/to/create/env/artist
source path/to/create/env/artist/bin/activate
```

- Using venv in windows
```bash
python -m venv path\to\create\env\artist
path\to\create\env\artist\Scripts\activate
```

### Installing dependencies
The command below will install all the required dependencies from `requirements.txt` file.
```bash
pip install -r requirements.txt
```

## Documentation
- Input Parameters for a script can be set by using config file.
- A test config file is provided named `config.txt` it uses json formatting.

### Create Data Files
- Data file to run TSP on cities can be provided or can be created using `get_cities_data.py`.
- A `.txt` file will be needed by script that contains name of the cities. A default `cities.txt` is provided.

Create data for cities
```bash
python get_cities_data.py --names=cities.txt --save_folder=/data/
```
##### Arguments
- `--name` or `-n`: provide path to name of cities `.txt` file. (required)
- `--save_folder` or `-s` provide path to folder where data will be saved in csv. It will save two files in that folder named `cities_data.csv` or `cities_distances.csv`. (not required)

### Run TSP on cities
- TSP can be run on files that we get from `get_cities_data.py` script or data in similar format generated by this script. Test data is provided inside `\data\` folder.
- A `config` file will be needed by script that contains settings related to run script. A test config file is provided as `config.txt`

Run TSP on cities
```bash
python tsp.py --config=config.txt
```
##### Arguments
- `--config` or `-c`: provide path to config file. (required)

## Results on 25 cities of Maharastra
<div>
  <iframe title="Map TSP applied on 25 cities of Maharastra India." src="data/tsp_map.html">Map TSP applied on 25 cities of Maharastra India.</iframe>
</div>